{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\nazar\\\\Desktop\\\\\\u043F\\u043E\\u0440\\u0442\\u0444\\u043E\\u043B\\u0456\\u043E \\u043F\\u0440\\u043E\\u0441\\u0442\\u0438\\u0439 \\u0447\\u0430\\u0442\\\\chat\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\nazar\\\\Desktop\\\\\\u043F\\u043E\\u0440\\u0442\\u0444\\u043E\\u043B\\u0456\\u043E \\u043F\\u0440\\u043E\\u0441\\u0442\\u0438\\u0439 \\u0447\\u0430\\u0442\\\\chat\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\nazar\\\\Desktop\\\\\\u043F\\u043E\\u0440\\u0442\\u0444\\u043E\\u043B\\u0456\\u043E \\u043F\\u0440\\u043E\\u0441\\u0442\\u0438\\u0439 \\u0447\\u0430\\u0442\\\\chat\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\nazar\\\\Desktop\\\\\\u043F\\u043E\\u0440\\u0442\\u0444\\u043E\\u043B\\u0456\\u043E \\u043F\\u0440\\u043E\\u0441\\u0442\\u0438\\u0439 \\u0447\\u0430\\u0442\\\\chat\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\nazar\\\\Desktop\\\\\\u043F\\u043E\\u0440\\u0442\\u0444\\u043E\\u043B\\u0456\\u043E \\u043F\\u0440\\u043E\\u0441\\u0442\\u0438\\u0439 \\u0447\\u0430\\u0442\\\\chat\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import{Link}from'react-router-dom';import React from'react';import styles from'./Style';import FormControl from'@material-ui/core/FormControl';import InputLabel from'@material-ui/core/InputLabel';import Input from'@material-ui/core/Input';import Paper from'@material-ui/core/Paper';import withStyles from'@material-ui/core/styles/withStyles';import CssBaseline from'@material-ui/core/CssBaseline';import Typography from'@material-ui/core/Typography';import Button from'@material-ui/core/Button';var firebase=require(\"firebase\");var SignupComponent=/*#__PURE__*/function(_React$Component){_inherits(SignupComponent,_React$Component);function SignupComponent(){var _this;_classCallCheck(this,SignupComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(SignupComponent).call(this));_this.userTyping=function(whichInput,event){switch(whichInput){case'email':_this.setState({email:event.target.value});break;case'password':_this.setState({password:event.target.value});break;case'passwordConfirmation':_this.setState({passwordConfirmation:event.target.value});break;default:break;}};_this.formIsValid=function(){return _this.state.password===_this.state.passwordConfirmation;};_this.submitSignup=function(e){e.preventDefault();if(!_this.formIsValid()){_this.setState({signupError:'Паролі не співпадать'});return;}firebase.auth().createUserWithEmailAndPassword(_this.state.email,_this.state.password).then(function(authRes){var userObj={email:authRes.user.email,friends:[],messages:[]};firebase.firestore().collection('users').doc(_this.state.email).set(userObj).then(function(){_this.props.history.push('/dashbord');},function(dbErr){console.log('Failed to add user to the database: ',dbErr);_this.setState({signupError:'Помилка не можливо додати користувача'});});},function(authErr){console.log('Failed to create user: ',authErr);_this.setState({signupError:'Помилка не можливо додати користувача'});});};_this.state={email:null,password:null,passwordConfirmation:null,signupError:''};return _this;}_createClass(SignupComponent,[{key:\"render\",value:function render(){var _this2=this;var classes=this.props.classes;return React.createElement(\"main\",{className:classes.main},React.createElement(CssBaseline,null),React.createElement(Paper,{className:classes.paper},React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"\\u0417\\u0430\\u0440\\u0435\\u0454\\u0441\\u0442\\u0440\\u0443\\u0432\\u0430\\u0442\\u0438\\u0441\\u044C!\"),React.createElement(\"form\",{onSubmit:function onSubmit(e){return _this2.submitSignup(e);},className:classes.form},React.createElement(FormControl,{required:true,fullWidth:true,margin:\"normal\"},React.createElement(InputLabel,{htmlFor:\"signup-email-input\"},\"\\u0412\\u0432\\u0435\\u0434\\u0456\\u0442\\u044C \\u0441\\u0432\\u0456\\u0439 \\u0435\\u043C\\u0430\\u0456\\u043B\"),React.createElement(Input,{autoComplete:\"email\",autoFocus:true,onChange:function onChange(e){return _this2.userTyping('email',e);},id:\"signup-email-input\"})),React.createElement(FormControl,{required:true,fullWidth:true,margin:\"normal\"},React.createElement(InputLabel,{htmlFor:\"signup-password-input\"},\"\\u041F\\u0440\\u0438\\u0434\\u0443\\u043C\\u0430\\u0439\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"),React.createElement(Input,{type:\"password\",onChange:function onChange(e){return _this2.userTyping('password',e);},id:\"signup-password-input\"})),React.createElement(FormControl,{required:true,fullWidth:true,margin:\"normal\"},React.createElement(InputLabel,{htmlFor:\"signup-password-confirmation-input\"},\"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0456\\u0442\\u044C \\u0441\\u0432\\u0456\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"),React.createElement(Input,{type:\"password\",onChange:function onChange(e){return _this2.userTyping('passwordConfirmation',e);},id:\"signup-password-confirmation-input\"})),React.createElement(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit},\"Submit\")),this.state.signupError?React.createElement(Typography,{className:classes.errorText,component:\"h5\",variant:\"h6\"},this.state.signupError):null,React.createElement(\"h5\",{className:classes.hasAccountHeader},\"\\u0412\\u0436\\u0435 \\u043C\\u0430\\u0454\\u0448 \\u0430\\u043A\\u0430\\u0443\\u043D\\u0442?\"),React.createElement(Link,{className:classes.logInLink,to:\"/\"},\"\\u0423\\u0432\\u0456\\u0439\\u0442\\u0438!\")));}}]);return SignupComponent;}(React.Component);export default withStyles(styles)(SignupComponent);","map":{"version":3,"sources":["C:/Users/nazar/Desktop/портфоліо простий чат/chat/src/Singup/Singup.js"],"names":["Link","React","styles","FormControl","InputLabel","Input","Paper","withStyles","CssBaseline","Typography","Button","firebase","require","SignupComponent","userTyping","whichInput","event","setState","email","target","value","password","passwordConfirmation","formIsValid","state","submitSignup","e","preventDefault","signupError","auth","createUserWithEmailAndPassword","then","authRes","userObj","user","friends","messages","firestore","collection","doc","set","props","history","push","dbErr","console","log","authErr","classes","main","paper","form","submit","errorText","hasAccountHeader","logInLink","Component"],"mappings":"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","sourcesContent":["import { Link } from 'react-router-dom';\r\nimport React from 'react';\r\nimport styles from './Style';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Input from '@material-ui/core/Input';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nconst firebase = require(\"firebase\");\r\n\r\nclass SignupComponent extends React.Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      email: null,\r\n      password: null,\r\n      passwordConfirmation: null,\r\n      signupError: ''\r\n    };\r\n  }\r\n\r\n  render() {\r\n\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <main className={classes.main}>\r\n        <CssBaseline/>\r\n        <Paper className={classes.paper}>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Зареєструватись!\r\n          </Typography>\r\n          <form onSubmit={(e) => this.submitSignup(e)} className={classes.form}>\r\n            <FormControl required fullWidth margin='normal'>\r\n              <InputLabel htmlFor='signup-email-input'>Введіть свій емаіл</InputLabel>\r\n              <Input autoComplete='email' autoFocus onChange={(e) => this.userTyping('email', e)} id='signup-email-input'></Input>\r\n            </FormControl>\r\n            <FormControl required fullWidth margin='normal'>\r\n              <InputLabel htmlFor='signup-password-input'>Придумайте пароль</InputLabel>\r\n              <Input type=\"password\" onChange={(e) => this.userTyping('password', e)} id='signup-password-input'></Input>\r\n            </FormControl>\r\n            <FormControl required fullWidth margin='normal'>\r\n              <InputLabel htmlFor='signup-password-confirmation-input'>Повторіть свій пароль</InputLabel>\r\n              <Input type=\"password\" onChange={(e) => this.userTyping('passwordConfirmation', e)} id='signup-password-confirmation-input'></Input>\r\n            </FormControl>\r\n            <Button type='submit' fullWidth variant='contained' color='primary' className={classes.submit}>Submit</Button>\r\n          </form>\r\n          { \r\n            this.state.signupError ? \r\n            <Typography className={classes.errorText} component='h5' variant='h6'>\r\n              {this.state.signupError}\r\n            </Typography> :\r\n            null\r\n          }\r\n          <h5 className={classes.hasAccountHeader}>Вже маєш акаунт?</h5>\r\n          <Link className={classes.logInLink} to='/'>Увійти!</Link>\r\n        </Paper>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  userTyping = (whichInput, event) => {\r\n    switch (whichInput) {\r\n      case 'email':\r\n        this.setState({ email: event.target.value });\r\n        break;\r\n\r\n      case 'password':\r\n        this.setState({ password: event.target.value });\r\n        break;\r\n\r\n      case 'passwordConfirmation':\r\n        this.setState({ passwordConfirmation: event.target.value });\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  formIsValid = () => this.state.password === this.state.passwordConfirmation;\r\n\r\n  submitSignup = (e) => {\r\n    e.preventDefault(); \r\n\r\n    if(!this.formIsValid()) {\r\n      this.setState({ signupError: 'Паролі не співпадать' });\r\n      return;\r\n    }\r\n\r\n    firebase\r\n      .auth()\r\n      .createUserWithEmailAndPassword(this.state.email, this.state.password)\r\n      .then(authRes => {\r\n        const userObj = {\r\n          email: authRes.user.email,\r\n          friends: [],\r\n          messages: []\r\n        };\r\n        firebase\r\n          .firestore()\r\n          .collection('users')\r\n          .doc(this.state.email)\r\n          .set(userObj)\r\n          .then(() => {\r\n            this.props.history.push('/dashbord');\r\n        }, dbErr => {\r\n          console.log('Failed to add user to the database: ', dbErr);\r\n          this.setState({ signupError: 'Помилка не можливо додати користувача' });\r\n        });\r\n    }, authErr => {\r\n      console.log('Failed to create user: ', authErr);\r\n      this.setState({ signupError: 'Помилка не можливо додати користувача' });\r\n    });\r\n  };\r\n}\r\n\r\nexport default withStyles(styles)(SignupComponent);"]},"metadata":{},"sourceType":"module"}