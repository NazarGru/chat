{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\nazar\\\\Desktop\\\\\\u043F\\u043E\\u0440\\u0442\\u0444\\u043E\\u043B\\u0456\\u043E \\u043F\\u0440\\u043E\\u0441\\u0442\\u0438\\u0439 \\u0447\\u0430\\u0442\\\\chat\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\nazar\\\\Desktop\\\\\\u043F\\u043E\\u0440\\u0442\\u0444\\u043E\\u043B\\u0456\\u043E \\u043F\\u0440\\u043E\\u0441\\u0442\\u0438\\u0439 \\u0447\\u0430\\u0442\\\\chat\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\nazar\\\\Desktop\\\\\\u043F\\u043E\\u0440\\u0442\\u0444\\u043E\\u043B\\u0456\\u043E \\u043F\\u0440\\u043E\\u0441\\u0442\\u0438\\u0439 \\u0447\\u0430\\u0442\\\\chat\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\nazar\\\\Desktop\\\\\\u043F\\u043E\\u0440\\u0442\\u0444\\u043E\\u043B\\u0456\\u043E \\u043F\\u0440\\u043E\\u0441\\u0442\\u0438\\u0439 \\u0447\\u0430\\u0442\\\\chat\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\nazar\\\\Desktop\\\\\\u043F\\u043E\\u0440\\u0442\\u0444\\u043E\\u043B\\u0456\\u043E \\u043F\\u0440\\u043E\\u0441\\u0442\\u0438\\u0439 \\u0447\\u0430\\u0442\\\\chat\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import{Link}from'react-router-dom';import React from'react';import FormControl from'@material-ui/core/FormControl';import InputLabel from'@material-ui/core/InputLabel';import Input from'@material-ui/core/Input';import Paper from'@material-ui/core/Paper';import withStyles from'@material-ui/core/styles/withStyles';import CssBaseline from'@material-ui/core/CssBaseline';import Typography from'@material-ui/core/Typography';import Button from'@material-ui/core/Button';import styles from'./Style';var firebase=require(\"firebase\");var Singup=/*#__PURE__*/function(_React$Component){_inherits(Singup,_React$Component);function Singup(){var _this;_classCallCheck(this,Singup);_this=_possibleConstructorReturn(this,_getPrototypeOf(Singup).call(this));_this.formIsValidation=function(){return _this.state.password===_this.state.passwordConfirmation;};_this.userTyping=function(whichInput,event){switch(whichInput){case'email':_this.setState({email:event.target.value});break;case'password':_this.setState({password:event.target.value});break;case'passwordConfirmation':_this.setState({passwordConfirmation:event.target.value});break;default:break;}};_this.submitSignup=function(e){e.preventDefault();if(!_this.formIsValidation()){_this.setState({signupError:'паролі не співпадають'});return;}firebase.auth().createUserWithEmailAndPassword(_this.state.email,_this.state.password).then(function(authRes){var userObj={email:authRes.user.email,friends:[],messages:[]};firebase.firestore().collection('users').doc(_this.state.email).set(userObj).then(function(){_this.props.history.push('/dashbord');},function(dbErr){console.log('Failed to add user to the database: ',dbErr);_this.setState({signupError:'Failed to add user'});});},function(authErr){console.log('Failed to create user: ',authErr);_this.setState({signupError:'Failed to add user'});});};_this.state={email:null,password:null,passwordConfirmation:null,signupError:''};return _this;}_createClass(Singup,[{key:\"render\",value:function render(){var _this2=this;var classes=this.props.classes;return React.createElement(\"main\",{className:classes.main},React.createElement(CssBaseline,null),React.createElement(Paper,{className:classes.paper},React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"\\u0417\\u0430\\u0440\\u0435\\u0454\\u0441\\u0442\\u0440\\u0443\\u0432\\u0430\\u0442\\u0438\\u0441\\u044C\"),React.createElement(\"form\",{onSubmit:function onSubmit(e){return _this2.submitSignup(e);},className:classes.form},React.createElement(FormControl,{require:true,fullWidth:true,margin:\"normal\"},React.createElement(InputLabel,{htmlFor:\"signup-email-input\"},\"\\u0412\\u0432\\u0435\\u0434\\u0456\\u0442\\u044C \\u0441\\u0432\\u0456\\u0439 email\"),React.createElement(Input,{onChange:function onChange(e){return _this2.userTyping('email',e);},autoComplete:\"email\",autoFocus:true,id:\"signup-email-input\"})),React.createElement(FormControl,{require:true,fullWidth:true,margin:\"normal\"},React.createElement(InputLabel,{htmlFor:\"signup-password-input\"},\"\\u041F\\u0440\\u0438\\u0434\\u0443\\u043C\\u0430\\u0439\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"),React.createElement(Input,{type:\"password\",onChange:function onChange(e){return _this2.userTyping('password',e);},id:\"signup-password-input\"})),React.createElement(FormControl,{require:true,fullWidth:true,margin:\"normal\"},React.createElement(InputLabel,{htmlFor:\"signup-password=confirmation-input\"},\"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0456\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"),React.createElement(Input,{type:\"password\",onChange:function onChange(e){return _this2.userTyping('passwordConfirmation',e);},id:\"signup-password=confirmation-input\"})),React.createElement(Button,{type:\"submit\",className:classes.submit,fullWidth:true,variant:\"contained\",color:\"primary\"},\"\\u0417\\u0430\\u0440\\u0435\\u0454\\u0441\\u0442\\u0440\\u0443\\u0432\\u0430\\u0442\\u0438\\u0441\\u044C\")),this.state.signupError?React.createElement(Typography,{className:classes.signupError,component:\"h5\",variant:\"h6\"},this.state.signupError):null,React.createElement(Typography,{className:classes.hasAccountHeader,component:\"h5\",variant:\"h6\"},\"\\u0412\\u0438 \\u0432\\u0436\\u0435 \\u043C\\u0430\\u0454\\u0442\\u0435 \\u0430\\u043A\\u0430\\u0443\\u043D\\u0442\"),React.createElement(Link,{to:\"/login\",className:classes.logInLink},\"\\u0423\\u0432\\u0456\\u0439\\u0442\\u0438\")));}}]);return Singup;}(React.Component);export default withStyles(styles)(Singup);","map":{"version":3,"sources":["C:/Users/nazar/Desktop/портфоліо простий чат/chat/src/Singup/Singup.js"],"names":["Link","React","FormControl","InputLabel","Input","Paper","withStyles","CssBaseline","Typography","Button","styles","firebase","require","Singup","formIsValidation","state","password","passwordConfirmation","userTyping","whichInput","event","setState","email","target","value","submitSignup","e","preventDefault","signupError","auth","createUserWithEmailAndPassword","then","authRes","userObj","user","friends","messages","firestore","collection","doc","set","props","history","push","dbErr","console","log","authErr","classes","main","paper","form","submit","hasAccountHeader","logInLink","Component"],"mappings":"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","sourcesContent":["import { Link } from 'react-router-dom';\r\nimport React from 'react';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Input from '@material-ui/core/Input';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport styles from './Style';\r\nconst firebase = require(\"firebase\");\r\n\r\n\r\nclass Singup extends React.Component {\r\n\r\n    constructor(){\r\n        super();\r\n        this.state={\r\n            email: null,\r\n            password: null,\r\n            passwordConfirmation: null,\r\n            signupError: ''\r\n        }\r\n    }\r\n\r\nrender(){\r\n    const { classes } = this.props;\r\n\r\nreturn(\r\n    <main className={classes.main}>\r\n        <CssBaseline></CssBaseline>\r\n        <Paper className={classes.paper}>\r\n            <Typography component='h1' variant='h5'>\r\n                Зареєструватись\r\n            </Typography>\r\n            <form onSubmit={(e) => this.submitSignup(e)} className={classes.form}>\r\n                <FormControl require fullWidth margin='normal' >\r\n                    <InputLabel htmlFor='signup-email-input'>\r\n                        Введіть свій email\r\n                    </InputLabel>\r\n                    <Input onChange={(e) => this.userTyping('email', e)} autoComplete='email'autoFocus id='signup-email-input' ></Input>\r\n                </FormControl>\r\n                <FormControl require fullWidth margin='normal' >\r\n                    <InputLabel htmlFor='signup-password-input'>\r\n                        Придумайте пароль\r\n                    </InputLabel>\r\n                    <Input type='password' onChange={(e) => this.userTyping('password', e)}  id='signup-password-input' ></Input>\r\n                </FormControl>\r\n                <FormControl require fullWidth margin='normal' >\r\n                    <InputLabel htmlFor='signup-password=confirmation-input'>\r\n                        Повторіть пароль \r\n                    </InputLabel>\r\n                    <Input type='password' onChange={(e) => this.userTyping('passwordConfirmation', e)}  id='signup-password=confirmation-input' ></Input>\r\n                </FormControl>\r\n                <Button type='submit' className={classes.submit} fullWidth variant='contained' color='primary'>Зареєструватись</Button>\r\n            </form>\r\n            {\r\n                this.state.signupError ?\r\n                <Typography className={classes.signupError}component='h5' variant='h6'>\r\n                    {this.state.signupError}\r\n                </Typography> :\r\n                null\r\n            }\r\n            <Typography className={classes.hasAccountHeader} component='h5' variant='h6'>Ви вже маєте акаунт</Typography>\r\n            <Link to='/login' className={classes.logInLink}>Увійти</Link>\r\n\r\n        </Paper>\r\n\r\n    </main>\r\n)\r\n}\r\nformIsValidation = () => this.state.password === this.state.passwordConfirmation;\r\n\r\nuserTyping = (whichInput, event) => {\r\n    switch (whichInput) {\r\n      case 'email':\r\n        this.setState({ email: event.target.value });\r\n        break;\r\n\r\n      case 'password':\r\n        this.setState({ password: event.target.value });\r\n        break;\r\n\r\n      case 'passwordConfirmation':\r\n        this.setState({ passwordConfirmation: event.target.value });\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  submitSignup = (e) => {\r\n    e.preventDefault(); \r\n\r\n    if(!this.formIsValidation()) {\r\n      this.setState({ signupError: 'паролі не співпадають' });\r\n      return;\r\n    }\r\n\r\n    firebase\r\n      .auth()\r\n      .createUserWithEmailAndPassword(this.state.email, this.state.password)\r\n      .then(authRes => {\r\n        const userObj = {\r\n          email: authRes.user.email,\r\n          friends: [],\r\n          messages: []\r\n        };\r\n        firebase\r\n          .firestore()\r\n          .collection('users')\r\n          .doc(this.state.email)\r\n          .set(userObj)\r\n          .then(() => {\r\n            this.props.history.push('/dashbord');\r\n        }, dbErr => {\r\n          console.log('Failed to add user to the database: ', dbErr);\r\n          this.setState({ signupError: 'Failed to add user' });\r\n        });\r\n    }, authErr => {\r\n      console.log('Failed to create user: ', authErr);\r\n      this.setState({ signupError: 'Failed to add user' });\r\n    });\r\n  };\r\n}\r\n\r\nexport default withStyles(styles)(Singup);"]},"metadata":{},"sourceType":"module"}